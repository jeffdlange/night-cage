<div class="mt-3 mb-5">
  <h1 class="text-shadow">
    DRAWN Tiles (Game Progress)
  </h1>

  <% if @drawn.gameover? %>

    <div class="my-4 alert alert-danger text-center">
      <p>
        Too many <%= @drawn.gameover_reason %> have been lost! Your party is
        swallowed by the crushing darkness.
      </p>

      <b>GAMEOVER</b>
    </div>

    <div>
      <%= link_to 'Reset Game', root_path,
            class: 'btn w-100 btn-danger',
            data: {
              turbo_confirm: 'Are you sure? This will reset to a NEW game',
              turbo_method: :get
            }
      %>
    </div>

  <% else %>

    <%= form_with url: home_path, method: :get do |f| %>
      <% @setup.to_h.each do |key, value| %>
        <%= f.hidden_field key, name: "setup[#{key}]", value: value %>
      <% end %>

      <div class="row">
        <div class="col">
          <%= f.label 'Starting', class: 'text-shadow' %>
          <%= f.number_field :starting_tiles,
                name: 'drawn[starting_tiles]',
                class: 'form-control',
                value: @drawn.starting_tiles || 0,
                min: 0
          %>
        </div>

        <div class="col">
          <%= f.label 'Gates', class: 'text-shadow' %>
          <%= f.number_field :gate_tiles,
                name: 'drawn[gate_tiles]',
                class: 'form-control',
                value: @drawn.gate_tiles || 0,
                min: 0
          %>
        </div>

        <div class="col">
          <%= f.label 'Straight', class: 'text-shadow' %>
          <%= f.number_field :straight_tiles,
                name: 'drawn[straight_tiles]',
                class: 'form-control',
                value: @drawn.straight_tiles || 0,
                min: 0
          %>
        </div>

        <div class="col">
          <%= f.label 'T-path', class: 'text-shadow' %>
          <%= f.number_field :t_tiles,
                name: 'drawn[t_tiles]',
                class: 'form-control',
                value: @drawn.t_tiles || 0,
                min: 0
          %>
        </div>

        <div class="col">
          <%= f.label 'Four-Way', class: 'text-shadow' %>
          <%= f.number_field :four_way_tiles,
                name: 'drawn[four_way_tiles]',
                class: 'form-control',
                value: @drawn.four_way_tiles || 0,
                min: 0
          %>
        </div>
      </div>

      <div class="row mt-3">
        <div class="col-3">
          <%= f.label 'Keys', class: 'text-shadow' %>
          <%= f.number_field :key_tiles,
                name: 'drawn[key_tiles]',
                class: 'form-control',
                value: @drawn.key_tiles || 0,
                min: 0
          %>
        </div>

        <div class="col-1 text-center">
          <div class="invisible">.</div>
          <div class="text-shadow">or</div>
        </div>

        <div class="col-3">
          <%= f.label 'Keepers', class: 'text-shadow' %>
          <%= f.number_field :keeper_tiles,
                name: 'drawn[keeper_tiles]',
                class: 'form-control',
                value: @drawn.keeper_tiles || 0,
                min: 0
          %>
        </div>
      </div>

      <div class="row mt-3">
        <div class="col">
          <%= f.label 'Wax Eaters', class: 'text-shadow' %>
          <%= f.number_field :wax_eater_tiles,
                name: 'drawn[wax_eater_tiles]',
                class: 'form-control',
                value: @drawn.wax_eater_tiles || 0,
                min: 0
          %>
        </div>

        <div class="col">
          <%= f.label 'Pit Fiends', class: 'text-shadow' %>
          <%= f.number_field :pit_fiend_tiles,
                name: 'drawn[pit_fiend_tiles]',
                class: 'form-control',
                value: @drawn.pit_fiend_tiles || 0,
                min: 0
          %>
        </div>

        <div class="col">
          <%= f.label 'Pathless', class: 'text-shadow' %>
          <%= f.number_field :pathless_tiles,
                name: 'drawn[pathless_tiles]',
                class: 'form-control',
                value: @drawn.pathless_tiles || 0,
                min: 0
          %>
        </div>

        <div class="col">
          <%= f.label 'Omens', class: 'text-shadow' %>
          <%= f.number_field :omen_tiles,
                name: 'drawn[omen_tiles]',
                class: 'form-control',
                value: @drawn.omen_tiles || 0,
                min: 0
          %>
        </div>
      </div>

      <div class="row mt-5">
        <div class="col-5">
          <div class="row">
            <h3 class="text-shadow">LOST</h3>
            <div class="col">
              <%= f.label 'Gates', class: 'text-shadow' %>
              <%= f.number_field :discarded_gate_tiles,
                    name: 'drawn[discarded_gate_tiles]',
                    class: 'form-control',
                    value: @drawn.discarded_gate_tiles || 0,
                    min: 0
              %>
            </div>
            <div class="col">
              <%= f.label 'Keys', class: 'text-shadow' %>
              <%= f.number_field :discarded_key_tiles,
                    name: 'drawn[discarded_key_tiles]',
                    class: 'form-control',
                    value: @drawn.discarded_key_tiles || 0,
                    min: 0
              %>
            </div>
          </div>
        </div>
      </div>

      <div class="row mt-3">
        <div class="col">
          <%= f.submit 'Record', class: 'btn btn-primary btn-lg w-100' %>
        </div>
      </div>

    <% end %>

  <% end %>
</div>
